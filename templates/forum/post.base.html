{% load i18n %}
{% load markup %}

<div class="post" id="post_{{post.pk}}">
    <div class="header">
        <div class="left">
            {% block header %}
            {% endblock %}
        </div>
        <div class="right">
            {% block vote %}
            <span id='message-{{ post.pk }}'>
                <span id='rating-{{ post.pk }}'>{{ post.get_rating }}</span>
                <span class="vote-positive">
                    <a class='vote-positive' 
                    href='{% url blog.views.vote_generic post.pk 0 %}' 
                    id='positive-{{ post.pk }}'>&#43;</a></span>&#47;<span
                    class="vote-negative"><a class='vote-negative' 
                    id='negative-{{ post.pk }}' 
                    href='{% url blog.views.vote_generic post.pk 1 %}'>&ndash;</a>
                </span>
            </span>
            {% endblock %}
        </div>
    </div>
    <div class="content">
        <div class="title">
            {% block title %}
                {{ post.title }}
            {% endblock %}
        </div>
        <div class="text">
            {% block text %}
                {{post.text|safe}}
            {% endblock %}
        </div>
    </div>
    <div class="info">
        <span class='user'>
            {% block user %}
            {% endblock %}
        </span>
        @ 
        {% block date %}
           {{post.created|date:"d.m.Y H:i:s"}}
        {% endblock %}
    </div>
    <div class="controls">
    {% block controls %}
        {% if user.is_staff %} 
            [<a href="{% url forum.views.scourge post.pk %}?offset={{ thread.number }}">{% trans "Scourge" %}</a>]
        {% endif %}
        {% if post.thread.closed %}
            [{% trans "This topic is closed" %}]
        {% else %}
            [<a href="{% url forum.views.reply post.pk %}">{% trans "Reply on this message" %}</a>]
        {% endif %}
    {% endblock %}
    </div>
</div>
